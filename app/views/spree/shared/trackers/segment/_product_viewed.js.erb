<% if @product.present? && Spree::Tracker.current(:segment) %>
  <script>
    if (typeof analytics !== 'undefined') {
      var segmentProductViewed = <%= product_for_segment(@product, image: default_image_for_product_or_variant(@product)) %>;

      analytics.page('Product Viewed', segmentProductViewed);
      analytics.track('Product Viewed', segmentProductViewed);
    }
  </script>
<% end %>
